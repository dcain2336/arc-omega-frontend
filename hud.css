:root{
  --bg:#070b12;
  --fg:#cfe7ff;
  --muted:#6f86a3;
  --accent:#45d6ff;
  --accent2:#00e5ff;
  --bad:#ff4d6d;

  --panel: rgba(255,255,255,.04);
  --stroke: rgba(69,214,255,.22);
  --stroke2: rgba(69,214,255,.55);

  --shadow: 0 12px 40px rgba(0,0,0,.55);
  --radius: 18px;
}

*{ box-sizing:border-box; }
html,body{ height:100%; margin:0; background:var(--bg); color:var(--fg); font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial; }

.hidden{ display:none !important; }
.mono{ font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; }

.topbar{
  position: sticky;
  top: 0;
  z-index: 20;
  display:flex;
  align-items:center;
  justify-content:space-between;
  padding: 10px 12px;
  background: rgba(7,11,18,.75);
  backdrop-filter: blur(10px);
  border-bottom: 1px solid rgba(69,214,255,.10);
}

.iconbtn{
  width: 42px;
  height: 42px;
  border-radius: 12px;
  border: 1px solid rgba(69,214,255,.14);
  background: rgba(255,255,255,.03);
  color: var(--fg);
  font-size: 18px;
  cursor: pointer;
}

.iconbtn:active{ transform: scale(.98); }

.topbar__right{ display:flex; gap:10px; align-items:center; }

.status{
  display:flex;
  align-items:center;
  gap:10px;
  padding: 8px 12px;
  border-radius: 999px;
  border: 1px solid rgba(69,214,255,.16);
  background: rgba(255,255,255,.02);
}

.dot{
  width: 10px; height:10px; border-radius:50%;
  background: rgba(0,229,255,.85);
  box-shadow: 0 0 12px rgba(0,229,255,.45);
}
.status__text{ font-size: 13px; letter-spacing:.12em; }

.main{
  max-width: 980px;
  margin: 0 auto;
  padding: 18px 14px 28px;
  display:grid;
  grid-template-columns: 1fr;
  gap: 16px;
}

.orbWrap{
  display:flex;
  flex-direction: column;
  align-items:center;
  gap: 12px;
  padding-top: 8px;
}

.orb{
  width: 240px;
  max-width: 72vw;
  aspect-ratio: 1 / 1;
  border-radius: 50%;
  position: relative;
  background: radial-gradient(circle at 50% 50%, rgba(0,229,255,.10), rgba(0,0,0,0) 55%);
  filter: drop-shadow(0 0 32px rgba(0,229,255,.20));
}

.orb__svg{
  width: 100%;
  height: 100%;
  display:block;
}

.orb::after{
  content:"";
  position:absolute;
  inset:-10%;
  border-radius:50%;
  background: radial-gradient(circle at 50% 50%, rgba(0,229,255,.18), rgba(0,0,0,0) 60%);
  opacity:.9;
  pointer-events:none;
  filter: blur(2px);
}

/* Orb states */
.orb--idle{
  animation: breathe 2.8s ease-in-out infinite;
}
.orb--thinking{
  animation: think 1.1s ease-in-out infinite;
  filter: drop-shadow(0 0 42px rgba(0,229,255,.35));
}
.orb--speaking{
  animation: speak .55s ease-in-out infinite;
  filter: drop-shadow(0 0 52px rgba(0,229,255,.45));
}
.orb--error{
  animation: errorflash .35s ease-in-out 2;
  filter: drop-shadow(0 0 30px rgba(255,77,109,.45));
}

@keyframes breathe{
  0%,100%{ transform: scale(1); }
  50%{ transform: scale(1.03); }
}
@keyframes think{
  0%,100%{ transform: scale(1); }
  50%{ transform: scale(1.045); }
}
@keyframes speak{
  0%,100%{ transform: scale(1.01); }
  50%{ transform: scale(1.055); }
}
@keyframes errorflash{
  0%,100%{ transform: translateX(0); }
  25%{ transform: translateX(-4px); }
  75%{ transform: translateX(4px); }
}

.orbCaption{
  display:flex;
  flex-wrap: wrap;
  gap: 8px;
  justify-content:center;
}

.pill{
  padding: 8px 10px;
  border-radius: 999px;
  border: 1px solid rgba(69,214,255,.14);
  background: rgba(255,255,255,.02);
  color: rgba(207,231,255,.85);
  font-size: 12px;
  max-width: 92vw;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.chat{
  width: 100%;
  display:flex;
  flex-direction: column;
  gap: 12px;
}

.chat__log{
  min-height: 260px;
  border-radius: var(--radius);
  border: 1px solid rgba(69,214,255,.14);
  background: rgba(255,255,255,.02);
  padding: 14px;
  box-shadow: var(--shadow);
}

.msg{
  display:flex;
  gap: 10px;
  margin: 12px 0;
}

.badge{
  min-width: 44px;
  height: 26px;
  border-radius: 999px;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size: 12px;
  letter-spacing:.14em;
  border: 1px solid rgba(69,214,255,.16);
  background: rgba(255,255,255,.03);
  color: rgba(207,231,255,.85);
}

.badge--you{
  border-color: rgba(255,255,255,.10);
  color: rgba(255,255,255,.8);
}
.badge--arc{
  border-color: rgba(0,229,255,.22);
  color: rgba(0,229,255,.9);
}

.bubble{
  flex: 1;
  padding: 12px 12px;
  border-radius: 14px;
  border: 1px solid rgba(255,255,255,.08);
  background: rgba(255,255,255,.02);
  white-space: pre-wrap;
  line-height: 1.35;
}

.bubble--you{
  border-color: rgba(255,255,255,.10);
}
.bubble--arc{
  border-color: rgba(0,229,255,.18);
}

.chat__composer{
  display:flex;
  gap: 10px;
  align-items:flex-end;
}

.chat__input{
  flex: 1;
  resize: vertical;
  border-radius: 14px;
  border: 1px solid rgba(69,214,255,.18);
  background: rgba(255,255,255,.03);
  color: var(--fg);
  padding: 12px 12px;
  font-size: 16px;
  outline: none;
  min-height: 54px;
}

.chat__input:focus{
  border-color: rgba(69,214,255,.60);
  box-shadow: 0 0 0 3px rgba(69,214,255,.12);
}

.chat__send{
  width: 110px;
  height: 54px;
  border-radius: 14px;
  border: 1px solid rgba(69,214,255,.40);
  background: rgba(69,214,255,.10);
  color: var(--fg);
  font-size: 16px;
  cursor: pointer;
}

.chat__send:active{ transform: scale(.99); }
.chat__send:disabled{ opacity:.55; cursor:not-allowed; }

.tickers{
  display:flex;
  flex-wrap: wrap;
  gap: 10px;
  padding-top: 2px;
}

.ticker{
  flex: 1;
  min-width: 160px;
  padding: 10px 12px;
  border-radius: 14px;
  border: 1px solid rgba(69,214,255,.12);
  background: rgba(255,255,255,.02);
  color: rgba(207,231,255,.65);
  font-size: 12px;
}

/* PANELS */
.panel{
  position: fixed;
  top: 0;
  bottom: 0;
  width: min(360px, 88vw);
  background: rgba(7,11,18,.92);
  border: 1px solid rgba(69,214,255,.14);
  box-shadow: var(--shadow);
  z-index: 50;
  backdrop-filter: blur(12px);
}

.panel--left{ left: 0; border-left: none; }
.panel--right{ right: 0; border-right: none; }

.panel__head{
  display:flex;
  align-items:center;
  justify-content:space-between;
  padding: 12px 12px;
  border-bottom: 1px solid rgba(69,214,255,.10);
}
.panel__title{ letter-spacing: .18em; font-size: 13px; color: rgba(207,231,255,.75); }
.panel__body{ padding: 12px; }
.panel__section{ margin: 10px 0 18px; }
.panel__label{ font-size: 12px; color: rgba(207,231,255,.65); margin-bottom: 10px; }
.panel__note{ font-size: 12px; color: rgba(111,134,163,.9); line-height: 1.35; }

.toolbtn{
  width: 100%;
  padding: 12px 12px;
  border-radius: 14px;
  border: 1px solid rgba(69,214,255,.25);
  background: rgba(69,214,255,.08);
  color: var(--fg);
  font-size: 15px;
  cursor: pointer;
  margin: 8px 0;
}
.toolbtn--ghost{
  border-color: rgba(255,255,255,.12);
  background: rgba(255,255,255,.03);
}

/* BLACKOUT */
.blackout{
  position: fixed;
  inset: 0;
  background: #000;
  z-index: 100;
  display:flex;
  align-items:center;
  justify-content:center;
}
.blackout__hint{
  letter-spacing:.35em;
  font-size: 14px;
  color: rgba(255,255,255,.35);
}

/* light theme (optional) */
body.light{
  --bg: #f6fbff;
  --fg: #0e1724;
  --muted:#4c647f;
  --panel: rgba(0,0,0,.03);
}
body.light .topbar{
  background: rgba(246,251,255,.75);
}
/* RIGHT STACK (globe + war chest) */
.rightStack{
  position: sticky;
  top: 72px;
  display: flex;
  flex-direction: column;
  gap: 16px;
}
@media (max-width: 980px){
  .rightStack{ position: static; }
}

/* WAR CHEST */
.chest{
  padding: 14px 12px 16px;
}
.chest__row{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap: 10px;
  padding: 10px 10px;
  border-radius: 14px;
  border: 1px solid rgba(69,214,255,.12);
  background: rgba(255,255,255,.02);
  margin-bottom: 10px;
}
.chest__label{
  font-size: 12px;
  letter-spacing:.14em;
  color: rgba(207,231,255,.65);
}
.chest__value{
  font-size: 13px;
  color: rgba(0,229,255,.85);
}